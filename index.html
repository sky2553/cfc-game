<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>KFC GHOST - Tiger Studio</title>
    <style>
        body { background: #000; color: #f00; margin: 0; overflow: hidden; font-family: 'Courier New', monospace; touch-action: none; }
        canvas { display: block; width: 100vw; height: 100vh; }
        .ui { position: fixed; top: 10px; left: 10px; background: rgba(0,0,0,0.8); padding: 10px; border: 1px solid #500; font-weight: bold; }
        
        /* ‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠‡πÄ‡∏°‡∏ô‡∏π‡πÅ‡∏•‡∏∞ Game Over */
        .overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: #000; z-index: 100; display: flex; flex-direction: column; align-items: center; justify-content: center; text-align: center; }
        #game-over-screen { display: none; background: rgba(50, 0, 0, 0.9); }
        
        button { background: #f00; color: #000; padding: 15px 30px; font-size: 18px; font-weight: bold; border: 2px solid #fff; cursor: pointer; margin: 8px; width: 250px; }
        button:active { background: #500; color: #fff; }
        
        .scary-text { color: #f00; font-size: 40px; text-shadow: 0 0 10px #f00; animation: shake 0.2s infinite; }
        @keyframes shake { 0% { transform: translate(2px, 2px); } 50% { transform: translate(-2px, -2px); } 100% { transform: translate(2px, -2px); } }
        
        #joy { position: fixed; bottom: 40px; left: 40px; width: 100px; height: 100px; border-radius: 50%; border: 2px solid #f00; background: rgba(255,0,0,0.1); }
        #stick { position: absolute; top: 25px; left: 25px; width: 50px; height: 50px; border-radius: 50%; background: #f00; }
    </style>
</head>
<body>

<div id="start-screen" class="overlay">
    <h1 class="scary-text">THE KFC GHOST</h1>
    <p style="color: #888;">Director: Tiger Studio</p>
    <button onclick="initGame(10)">EASY (10 ‡∏ä‡∏¥‡πâ‡∏ô)</button>
    <button onclick="initGame(20)">NORMAL (20 ‡∏ä‡∏¥‡πâ‡∏ô)</button>
    <button onclick="initGame(10000)" style="background: #300; border-color: red;">üî• HELL (10,000 ‡∏ä‡∏¥‡πâ‡∏ô)</button>
</div>

<div id="game-over-screen" class="overlay">
    <h1 class="scary-text" style="font-size: 60px;">GAME OVER</h1>
    <p id="final-score" style="font-size: 20px; color: #fff;"></p>
    <button onclick="restartGame()">‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÉ‡∏´‡∏°‡πà‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á</button>
</div>

<div class="ui">üçó ‡πÑ‡∏Å‡πà: <span id="score">0</span> / <span id="max">0</span></div>
<canvas id="gameCanvas"></canvas>
<div id="joy"><div id="stick"></div></div>

<script>
const canvas = document.getElementById("gameCanvas");
const ctx = canvas.getContext("2d");
let isRunning = false, itemsFound = 0, targetItems = 0;
let audioCtx;

function initAudio() { audioCtx = new (window.AudioContext || window.webkitAudioContext)(); }

function playScream() {
    if(!audioCtx) return;
    let osc = audioCtx.createOscillator();
    let g = audioCtx.createGain();
    osc.type = 'sawtooth';
    osc.frequency.setValueAtTime(200, audioCtx.currentTime);
    osc.frequency.exponentialRampToValueAtTime(5000, audioCtx.currentTime + 0.6);
    g.gain.setValueAtTime(0.3, audioCtx.currentTime);
    g.gain.linearRampToValueAtTime(0, audioCtx.currentTime + 0.6);
    osc.connect(g); g.connect(audioCtx.destination);
    osc.start(); osc.stop(audioCtx.currentTime + 0.6);
}

let player = { x: 100, y: 100, r: 18, speed: 6 };
let ghost = { x: 500, y: 500, r: 25, speed: 2 };
let foods = [];
let mvX = 0, mvY = 0;

function spawnFood() {
    foods = [];
    let count = (targetItems > 15) ? 15 : targetItems; 
    for(let i=0; i<count; i++) {
        foods.push({ x: 50 + Math.random()*(window.innerWidth-100), y: 50 + Math.random()*(window.innerHeight-100) });
    }
}

function initGame(mode) {
    initAudio();
    targetItems = mode;
    itemsFound = 0;
    document.getElementById("max").innerText = targetItems;
    document.getElementById("score").innerText = 0;
    document.getElementById("start-screen").style.display = 'none';
    document.getElementById("game-over-screen").style.display = 'none';
    
    player.x = 100; player.y = 100;
    ghost.x = window.innerWidth - 100; ghost.y = window.innerHeight - 100;
    ghost.speed = (mode === 10000) ? 3.5 : 2.5;
    
    spawnFood();
    isRunning = true;
    requestAnimationFrame(loop);
}

function restartGame() {
    location.reload(); // ‡∏ß‡∏¥‡∏ò‡∏µ‡∏ó‡∏µ‡πà‡∏ä‡∏±‡∏ß‡∏£‡πå‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏•‡πâ‡∏≤‡∏á‡∏ö‡∏±‡πä‡∏Å‡∏Ñ‡πâ‡∏≤‡∏á
}

// Joystick
window.addEventListener("touchmove", e => {
    e.preventDefault();
    let r = document.getElementById("joy").getBoundingClientRect();
    let t = e.touches[0];
    mvX = (t.clientX - (r.left + 50))/50;
    mvY = (t.clientY - (r.top + 50))/50;
    document.getElementById("stick").style.transform = `translate(${mvX*25}px, ${mvY*25}px)`;
}, {passive: false});
window.addEventListener("touchend", () => { mvX = 0; mvY = 0; document.getElementById("stick").style.transform = `translate(0,0)`; });

function update() {
    if(!isRunning) return;
    player.x += mvX * player.speed;
    player.y += mvY * player.speed;
    player.x = Math.max(20, Math.min(window.innerWidth-20, player.x));
    player.y = Math.max(20, Math.min(window.innerHeight-20, player.y));

    foods = foods.filter(f => {
        let d = Math.sqrt((player.x-f.x)**2 + (player.y-f.y)**2);
        if(d < 30) { itemsFound++; document.getElementById("score").innerText = itemsFound; return false; }
        return true;
    });

    if(foods.length === 0 && itemsFound < targetItems) spawnFood();
    if(itemsFound >= targetItems) { alert("‡∏Ñ‡∏∏‡∏ì‡∏£‡∏≠‡∏î‡∏ï‡∏≤‡∏¢! Tiger Studio ‡∏Ñ‡∏≠‡∏ô‡πÄ‡∏ü‡∏¥‡∏£‡πå‡∏°!"); restartGame(); }

    let dx = player.x - ghost.x, dy = player.y - ghost.y;
    let dist = Math.sqrt(dx*dx + dy*dy);
    ghost.x += (dx/dist) * ghost.speed;
    ghost.y += (dy/dist) * ghost.speed;

    if(dist < 40) {
        playScream();
        isRunning = false;
        document.getElementById("final-score").innerText = "‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏Å‡πá‡∏ö‡πÑ‡∏Å‡πà‡πÑ‡∏î‡πâ " + itemsFound + " ‡∏ä‡∏¥‡πâ‡∏ô ‡∏Å‡πà‡∏≠‡∏ô‡πÇ‡∏î‡∏ô‡∏Ü‡πà‡∏≤!";
        document.getElementById("game-over-screen").style.display = 'flex';
    }
}

function draw() {
    canvas.width = window.innerWidth; canvas.height = window.innerHeight;
    ctx.fillStyle = "#0a0a0a"; ctx.fillRect(0,0,canvas.width, canvas.height);

    foods.forEach(f => { ctx.fillStyle = "#fb0"; ctx.beginPath(); ctx.arc(f.x, f.y, 10, 0, 7); ctx.fill(); });
    ctx.fillStyle = "#0f0"; ctx.beginPath(); ctx.arc(player.x, player.y, player.r, 0, 7); ctx.fill();

    // ‡∏ú‡∏µ (‡πÅ‡∏ß‡πà‡∏ô‡∏î‡∏≥)
    ctx.fillStyle = "#fff"; ctx.beginPath(); ctx.arc(ghost.x, ghost.y, ghost.r, 0, 7); ctx.fill();
    ctx.fillStyle = "#000"; ctx.fillRect(ghost.x-15, ghost.y-8, 10, 5); ctx.fillRect(ghost.x+5, ghost.y-8, 10, 5);
}

function loop() { if(isRunning) { update(); draw(); requestAnimationFrame(loop); } }
</script>
</body>
</html>
<div id="tournament-section" style="background: #222; color: gold; padding: 15px; border: 2px solid #555; border-radius: 10px; margin-top: 20px; font-family: sans-serif;">
    <h3>üèÜ KFC Tournament (Security Patch 2026)</h3>
    <p style="font-size: 12px; color: #0f0;">üõ°Ô∏è ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞: ‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢ (Verified by Tiger Studio)</p>
    
    <div id="guest-login">
        <input type="text" id="guestName" placeholder="‡πÉ‡∏™‡πà‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏•‡πà‡∏ô (Guest)..." style="padding: 5px; border-radius: 5px; border: none;">
        <button onclick="startTournament()" style="background: gold; border: none; padding: 5px 15px; border-radius: 5px; cursor: pointer; font-weight: bold;">‡∏•‡∏á‡πÅ‡∏Ç‡πà‡∏á Tournament</button>
    </div>

    <div id="leaderboard" style="margin-top: 15px;">
        <p>üìä ‡∏≠‡∏±‡∏ô‡∏î‡∏±‡∏ö‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì: <span id="highScore">0</span> ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô</p>
    </div>
</div>

<script>
    // ‡∏£‡∏∞‡∏ö‡∏ö Security & Tournament
    console.log("KFC Ghost: Security Patch 2026 Active");
    
    function startTournament() {
        let name = document.getElementById('guestName').value;
        if(name === "") {
            alert("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÉ‡∏™‡πà‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏•‡πà‡∏ô‡∏Å‡πà‡∏≠‡∏ô‡∏•‡∏á‡πÅ‡∏Ç‡πà‡∏á‡∏ô‡∏∞‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô!");
        } else {
            alert("‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏ï‡πâ‡∏≠‡∏ô‡∏£‡∏±‡∏ö‡∏Ñ‡∏∏‡∏ì " + name + " ‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà Tournament!");
            // ‡∏£‡∏∞‡∏ö‡∏ö‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÅ‡∏ö‡∏ö Guest ‡πÉ‡∏ô‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á (Local Storage)
            localStorage.setItem("currentGuest", name);
        }
    }

    // ‡πÇ‡∏´‡∏•‡∏î‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÄ‡∏î‡∏¥‡∏° (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ)
    window.onload = function() {
        let savedScore = localStorage.getItem("kfcHighScore") || 0;
        document.getElementById("highScore").innerText = savedScore;
    }
</script>
