<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>CFC Ghost: Tiger Edition</title>
    <style>
        body { margin: 0; background: #000; overflow: hidden; touch-action: none; color: white; font-family: sans-serif; }
        canvas { display: none; }
        #menu { position: absolute; width: 100%; height: 100%; display: flex; flex-direction: column; justify-content: center; align-items: center; background: #000; z-index: 10; }
        h1 { color: #ff0000; font-size: 42px; text-shadow: 0 0 15px #f00; margin: 10px; }
        .btn { width: 220px; padding: 15px; margin: 8px; background: #222; border: 2px solid #fff; color: white; border-radius: 10px; font-size: 18px; text-align: center; }
        #hall-of-fame { margin-bottom: 20px; padding: 10px; border: 1px dashed #f1c40f; color: #f1c40f; text-align: center; }
        #ui { position: absolute; top: 10px; left: 10px; display: none; z-index: 5; font-weight: bold; }
        #joy-container { position: absolute; bottom: 40px; left: 40px; width: 120px; height: 120px; background: rgba(255,255,255,0.1); border-radius: 50%; display: none; justify-content: center; align-items: center; }
        #joy-stick { width: 50px; height: 50px; background: rgba(255,255,255,0.5); border-radius: 50%; }
    </style>
</head>
<body>

<div id="menu">
    <h1>CFC GHOST</h1>
    <div id="hall-of-fame">
        üèÜ LAST TOP PLAYER:<br>
        <span id="top-name">Nobody</span>: <span id="top-score">0</span>
    </div>
    <div class="btn" onclick="startGame('easy')">EASY (5 HP)</div>
    <div class="btn" onclick="startGame('hard')">HARD (1 HP)</div>
</div>

<div id="ui">‚ù§Ô∏è HP: <span id="hp-ui">0</span> | üçó Score: <span id="score-ui">0</span></div>
<div id="joy-container"><div id="joy-stick"></div></div>
<canvas id="gameCanvas"></canvas>

<script>
const canvas = document.getElementById('gameCanvas');
const ctx = canvas.getContext('2d');
let player, ghost, kfc, score = 0, difficulty, joyActive = false, startX, startY;

// ‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î
let savedName = localStorage.getItem('cfc_name') || "Nobody";
let savedScore = localStorage.getItem('cfc_highscore') || 0;
document.getElementById('top-name').innerText = savedName;
document.getElementById('top-score').innerText = savedScore;

function startGame(mode) {
    document.getElementById('menu').style.display = 'none';
    canvas.style.display = 'block';
    document.getElementById('ui').style.display = 'block';
    document.getElementById('joy-container').style.display = 'flex';
    
    difficulty = mode; score = 0;
    canvas.width = window.innerWidth; canvas.height = window.innerHeight;
    player = { x: canvas.width/2, y: canvas.height/2, lives: mode === 'easy' ? 5 : 1, vx: 0, vy: 0 };
    ghost = { x: 50, y: 50, speed: mode === 'easy' ? 1.3 : 2.1 };
    kfc = { x: 200, y: 200 };
    
    document.getElementById('hp-ui').innerText = player.lives;
    document.getElementById('score-ui').innerText = score;
    animate();
}

// ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏≠‡∏¢‡∏™‡∏ï‡∏¥‡πä‡∏Å (‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡πÄ‡∏î‡∏¥‡∏°)
const joyContainer = document.getElementById('joy-container');
const joyStick = document.getElementById('joy-stick');
joyContainer.addEventListener('touchstart', (e) => { joyActive = true; startX = e.touches[0].clientX; startY = e.touches[0].clientY; });
joyContainer.addEventListener('touchmove', (e) => {
    if (!joyActive) return;
    let dx = e.touches[0].clientX - startX, dy = e.touches[0].clientY - startY;
    let dist = Math.min(50, Math.hypot(dx, dy)), angle = Math.atan2(dy, dx);
    joyStick.style.transform = `translate(${Math.cos(angle)*dist}px, ${Math.sin(angle)*dist}px)`;
    player.vx = Math.cos(angle) * (dist/8); player.vy = Math.sin(angle) * (dist/8);
});
joyContainer.addEventListener('touchend', () => { joyActive = false; joyStick.style.transform = `translate(0,0)`; player.vx = 0; player.vy = 0; });

function animate() {
    ctx.fillStyle = "#111"; ctx.fillRect(0, 0, canvas.width, canvas.height);
    player.x += player.vx; player.y += player.vy;
    let dgx = player.x - ghost.x, dgy = player.y - ghost.y, d = Math.hypot(dgx, dgy);
    ghost.x += (dgx/d) * ghost.speed; ghost.y += (dgy/d) * ghost.speed;
    
    if (d < 30) {
        player.lives--; document.getElementById('hp-ui').innerText = player.lives;
        ghost.x = 0; ghost.y = 0;
        if (player.lives <= 0) {
            let name = prompt("GAME OVER! ‡∏û‡∏¥‡∏°‡∏û‡πå‡∏ä‡∏∑‡πà‡∏≠‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥:", "Tiger");
            if (name) {
                localStorage.setItem('cfc_name', name);
                localStorage.setItem('cfc_highscore', score);
            }
            location.reload(); return;
        }
    }
    if (Math.hypot(player.x - kfc.x, player.y - kfc.y) < 30) {
        score++; document.getElementById('score-ui').innerText = score;
        kfc.x = Math.random()*(canvas.width-40); kfc.y = Math.random()*(canvas.height-40);
        ghost.speed += 0.05;
    }
    ctx.font = "30px Arial"; ctx.fillText("üçó", kfc.x, kfc.y); ctx.fillText("üßë‚Äçüç≥", player.x, player.y); ctx.fillText("üëª", ghost.x, ghost.y);
    requestAnimationFrame(animate);
}
</script>
</body>
</html>
